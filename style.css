/*** Theme ***/

:root {
  /* color definitions */
  --clr-neutral-100: hsl(0, 0%, 100%);
  --clr-neutral-200: hsl(0, 0%, 87%);
  --clr-neutral-300: hsl(0, 0%, 57%);
  --clr-neutral-400: hsl(0, 0%, 27%);
  --clr-neutral-800: hsl(0, 0%, 17%);
  --clr-neutral-900: hsl(0, 0%, 12%);

  --clr-green-100: hsl(169, 11%, 93%);
  --clr-green-200: hsl(169, 51%, 58%);
  --clr-green-400: hsl(169, 86%, 28%);
  --clr-green-500: hsl(169, 86%, 20%);
  --clr-green-800: hsl(169, 86%, 12%);
  --clr-green-900: hsl(169, 80%, 12%);

  --clr-robust: hsl(221, 63%, 32%);
  --clr-green: hsl(110, 63%, 32%);
  --clr-flower: hsl(2, 92%, 33%);
  --clr-colorful: hsl(303, 55%, 47%);
  --clr-sunloving: hsl(27, 88%, 33%);
  --clr-air: hsl(180, 84%, 27%);
  --clr-decorative: hsl(278, 79%, 40%);
  --clr-edible: hsl(68, 61%, 30%);
  --clr-easy: hsl(224, 86%, 58%);
  --clr-fragrant: hsl(327, 51%, 47%);
  --clr-fast: hsl(218, 11%, 34%);

  /* font weights definitions */
  --fw-400: 400;
  --fw-500: 500;
  --fw-600: 600;
  --fw-700: 700;
  --fw-800: 800;
  --fw-900: 900;

  /* Font sizes definitions */
  --fs-100: 0.625rem;
  --fs-200: 0.75rem;
  --fs-400: 1rem;
  --fs-500: 1.25rem;
  --fs-600: 1.5rem;
  --fs-700: 2rem;
  --fs-800: 2.5rem;
  --fs-900: 3rem;

  /*** Theme setup ***/

  /* font family */
  --font-base: 'Open Sans', 'Segoe UI', Tahoma, sans-serif;

  /* theme color assignments */
  --clr-accent: var(--clr-green-400);
  --clr-accent-light-1: var(--clr-green-100);
  --clr-accent-light-5: var(--clr-green-500);
  --clr-accent-light-8: var(--clr-green-800);

  --clr-primary-light-1: var(--clr-neutral-100);
  --clr-primary-light-2: var(--clr-neutral-200);
  --clr-primary-light-3: var(--clr-neutral-300);
  --clr-primary-light-4: var(--clr-neutral-400);

  --clr-primary: var(--clr-neutral-400);
  --clr-primary-dark: var(--clr-neutral-800);

  /* Font weights assignments */
  --fw-regular: var(--fw-400);
  --fw-medium: var(--fw-500);
  --fw-semi-bold: var(--fw-600);
  --fw-bold: var(--fw-700);
  --fw-x-bold: var(--fw-900);

  /* Border shadow */
  --border-shadow: 0 0 5px 0 hsl(0 0% 0% / 0.12);

  /* Spacing */
  --spacing-base: 1rem;
  --spacing-base-sm: 0.5rem;

  --flow-space: 1.75em;
  --flow-space-lg: 4em;

  /* border radius */
  --radius-100: 0.6rem;
  --radius-900: 100vw;

  /* outline */
  --outline-accent-100: 0.18rem dashed var(--clr-accent);
  --outline-neutral-100: 0.18rem dashed var(--clr-neutral-100);
  --outline-offset-100: 0.18rem;
}

/*** Global/base ***/
h1,
h2,
h3 {
  font-weight: var(--fw-bold);
  line-height: 1;
}

h1,
h2 {
  font-size: var(--fs-700);
}

h3 {
  font-size: var(--fs-600);
  font-weight: var(--fw-semi-bold);
}

a {
  text-decoration: none;
  color: var(--clr-accent);

  &:hover,
  &:focus-visible {
    text-decoration: underline;
  }
}

body {
  font-family: var(--font-base);
  background-color: var(--clr-primary-light-2);
  color: var(--clr-primary-dark);
}

:focus-visible {
  outline: var(--outline-accent-100);
  outline-offset: var(--outline-offset-100);
}

/*** Composition ***/
.btn {
  cursor: pointer;
  padding-block: var(--spacing-base-sm);
  padding-inline: var(--spacing-base);
  border-radius: var(--radius-900);
  outline: none;
  border: none;
}

[data-variant='primary'] {
  background-color: var(--clr-accent);
  color: var(--clr-primary-light-1);

  &:hover {
    background-color: var(--clr-accent-light-5);
  }
}

.flow > * + * {
  margin-block-start: var(--flow-space);
}

.flow-lg > * + * {
  margin-block-start: var(--flow-space-lg);
}

/*
See these for more info:
https://www.youtube.com/watch?v=c13gpBrnGEw
https://www.youtube.com/watch?v=cf-J4ffMBfo
*/
.content-grid,
.fullwidth {
  --_min-margin-width: var(--spacing-base);
  --_content-width: 80rem;
  --_breakin-width: 70ch;

  /* calculate total column size of content area on each side of the breakin content by substracting the breakin width from the content width and dividing it by 2*/
  --_content-col-size: calc(
    (var(--_content-width) - var(--_breakin-width)) / 2
  );

  /* max breakin width or breakin area size 100% minus the gap on each side if content size is larger than screen width  */
  --_breakin-size: min(
    100% - var(--_min-margin-width) * 2,
    var(--_breakin-width)
  );

  display: grid;
  grid-template-columns:
    [fullwidth-start] minmax(var(--_min-margin-width), 1fr)
    [content-start] minmax(0, var(--_content-col-size))
    [breakin-start] var(--_breakin-size) [breakin-end]
    minmax(0, var(--_content-col-size)) [content-end]
    minmax(var(--_min-margin-width), 1fr) [fullwidth-end];

  /* put child elements in the content column if they don't have the .fullwidth or .breakin class */
  > *:not(.breakin, .fullwidth) {
    grid-column: content;
  }

  /* if child elements have the .fullwidth class put in the fullwidth column */
  > .fullwidth {
    grid-column: fullwidth;
  }

  /* if child elements have the .breakin class put in the breakin column */
  > .breakin-grid {
    grid-column: breakin;

    &.fullwidth {
      grid-column: fullwidth;
      > * {
        grid-column: breakin;
      }
    }
  }

  > .breakin-grid-lg {
    --_breakin-width: 90ch;
  }
}

.flex {
  display: flex;
}

.flex-center {
  align-items: center;
  justify-items: center;
}

.flex-wrap {
  flex-wrap: wrap;
}

.gap-100 {
  gap: var(--spacing-base-sm);
}

.grid {
  display: grid;
}

.link {
  display: inline-block;
  padding-inline: var(--spacing-base);
  padding-block: var(--spacing-base-sm);
  border-radius: var(--radius-900);

  &:is(:hover, :active) {
    text-decoration: none;
  }
}

[data-variant='tag'] {
  font-size: var(--fs-200);
  text-transform: uppercase;
  background-color: var(--clr-primary-light-3);
  padding-inline: var(--spacing-base-sm);
  padding-block: 0.24rem;
  color: var(--clr-primary-light-1);

  &:hover {
    background-color: var(--clr-primary-light-4);
  }
}

/*** Utilities ***/
.clr-bg-accent {
  background-color: var(--clr-accent);
  color: var(--clr-accent-light-1);
}

.clr-bg-primary-light1 {
  background-color: var(--clr-primary-light-1);
}

.fit-content-block {
  block-size: fit-content;
}

.py-lg {
  padding-block: var(--flow-space-lg);
}

.px-base {
  padding-inline: var(--spacing-base);
}

.radius-100 {
  border-radius: var(--radius-100);
}

.radius-900 {
  border-radius: var(--radius-900);
}

.txt-center {
  text-align: center;
}

/* blocks */

/* header */
.page-header {
  align-content: center;
  justify-content: center;
  position: relative;
  padding-block: var(--spacing-base);
  background-color: var(--clr-primary-light-1);
  text-transform: uppercase;

  position: sticky;
  inset-block-start: 0;
  z-index: 9999;

  a {
    border-radius: 0.12rem;
    overflow: hidden;
  }

  > .brand {
    --_size: 3rem;
    grid-row: 1/1;
    justify-self: start;
    gap: var(--spacing-base-sm);

    &:hover {
      color: var(--clr-accent-light-5);
      text-decoration: none;
    }

    > svg {
      block-size: var(--_size);
      inline-size: var(--_size);
      aspect-ratio: 1;
    }
  }
  > .hamburger {
    display: none;
  }
}

.page-header > .nav-main {
  grid-column: 3/5;
  grid-row: 1/1;

  > .list {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--flow-space);

    > .item > .link-nav {
      display: block;
      padding-block: var(--spacing-base-sm);
      text-decoration: none;
      padding-inline-start: var(--spacing-base);
      position: relative;

      &::after {
        display: block;
        content: '';
        inline-size: 100%;
        block-size: 100%;
        position: absolute;
        z-index: -1;
        inset-block-start: 0;
        inset-inline-start: 0;
        transform-origin: left;
        transform: scaleX(0);
        transition: transform 200ms ease-in-out;
        background-color: var(--clr-accent);
      }

      &[data-state='current'] {
        color: var(--clr-accent-light-1);
        &::after {
          transform: scaleX(1);
        }
      }

      &:hover {
        color: var(--clr-accent-light-1);
        &::after {
          transform: scaleX(1);
        }
      }
    }
  }
}

/* main */
.hero {
  .grid-gallery {
    grid-template-areas:
      'one two'
      'three four'
      'five six';

    border: 0.88rem solid var(--clr-primary-light-1);
    box-shadow: var(--border-shadow);
    grid-template-rows: repeat(2, minmax(15rem, 1fr));

    @media (width > 32rem) {
      grid-template-areas:
        'one two three'
        'four five six';
    }

    @media (width > 850px) {
      block-size: 550px;
      grid-template-columns: repeat(auto-fit, minmax(125px, 1fr));
      grid-template-areas:
        'one one two three four four'
        'one one five five six six';
      overflow: hidden;
    }

    > .item {
      inline-size: 100%;
      block-size: 100%;
      img {
        inline-size: 100%;
        block-size: 100%;
        object-fit: cover;
      }
    }

    > li {
      grid-area: var(--_pos);
    }
  }
}

.planting {
  flex-direction: column;
  gap: clamp(4rem, 2.5vw + 0.5rem, 6rem);

  > aside {
    --_size: min(100%, 14rem);
    inline-size: 100%;
    flex-grow: 1;
    aspect-ratio: 1;
    background-image: url(./assets/images/icon-planting.svg);
    background-position: center;
    background-repeat: no-repeat;
    background-size: 50%;
  }

  > main {
    inline-size: 100%;
    display: grid;

    > .sub-form {
      --_pad: 0.18rem;
      --_pad-i: calc(var(--spacing-base) - var(--_pad));
      display: flex;
      border-radius: var(--radius-900);
      border: 1px solid var(--clr-neutral-800);
      padding: var(--_pad);

      &:focus-within {
        outline: var(--outline-accent-100);
        outline-offset: var(--outline-offset-100);
      }

      > [type='email'] {
        flex-grow: 2;
        padding-inline: var(--_pad-i);
        border: none;
        outline: none;
        background-color: transparent;
        color: var(--clr-neutral-800);
      }
    }

    > .link {
      inline-size: max-content;
      justify-self: center;
    }
  }

  @media (width > 540px) {
    flex-direction: row;

    &[data-flow='reversed'] {
      flex-direction: row-reverse;
    }

    > aside {
      inline-size: 50cqi;
    }

    > main {
      > .link {
        justify-self: end;
      }
    }

    &.txt-center {
      text-align: initial;
    }
  }
}

/* cards */
.cards > .cards-grid {
  --_gap: var(--spacing-base);
  display: grid;
  grid-template-columns: repeat(
    auto-fit,
    minmax(min(100%, var(--_content-width) / 4 - var(--_gap) * 4), 1fr)
  );
  gap: var(--_gap);

  .card {
    --_link-index: 4;
    display: grid;
    grid-template-rows: max-content;
    gap: var(--_gap);
    border-radius: var(--radius-100);
    box-shadow: var(--border-shadow);
    overflow: hidden;
    position: relative;

    &:hover {
      box-shadow: 0 0 10px 1px hsl(0 0% 0% / 0.25);
    }

    > a {
      display: block;
      position: absolute;
      inline-size: 100%;
      block-size: 100%;
      z-index: calc(var(--_link-index) - 1);
    }

    > header {
      position: relative;
      block-size: 350px;
      overflow: hidden;
      inline-size: 100%;

      > img {
        block-size: 100%;
        width: 100%;
        object-fit: cover;
      }

      &::before {
        display: block;
        content: '';
        block-size: 100%;
        inline-size: 100%;
        position: absolute;
        background: url(./assets/images/icon-watermark.svg) no-repeat center;
        background-size: 40%;
        background-color: hsl(0 0% 0% / 0.7);
        opacity: 0.3;
      }
    }

    > main {
      padding-inline: var(--_gap);

      > .tags {
        block-size: 3.8rem;
        overflow: hidden;
        @media (width <= 540px) {
          block-size: fit-content;
        }
      }

      a {
        position: relative;
        z-index: var(--_link-index);
      }
    }

    > footer {
      align-self: end;
      display: flex;
      gap: var(--spacing-base);
      align-items: center;
      padding: var(--_gap) var(--spacing-base);

      > img {
        block-size: 2rem;
        background-color: var(--clr-neutral-300);
        border-radius: var(--radius-900);
        aspect-ratio: 1;
      }

      a {
        position: relative;
        z-index: var(--_link-index);
      }
    }
  }
}

/* .page-footer */
.page-footer > .container {
  gap: var(--flow-space-lg);

  a {
    color: var(--clr-primary-light-1);
    &:focus-visible {
      border-radius: 0.12rem;
      outline: var(--outline-neutral-100);
      outline-offset: var(--outline-offset-100);
    }
  }

  .left {
    inline-size: min(100%, 80ch);
    > [role='list'] {
      font-weight: var(--fw-700);
      > * + * {
        margin-block-start: var(--spacing-base);
      }
    }
  }

  > .nav-footer {
    margin-inline-start: auto;

    > [role='list'] {
      text-transform: uppercase;

      > .item > .link {
        display: block;
        padding-block: var(--spacing-base-sm);

        &:hover {
          color: var(--clr-neutral-200);
        }
      }
    }
  }

  @media (width > 540px) {
    display: flex;
    > .nav-footer > [role='list'] {
      flex-direction: column;
    }
  }
}

/* EXECEPTIONS*/
/* mobile navigation */

@media (width <= 1024px) {
  .page-header > .hamburger {
    display: block;
    --_clr-txt: var(--clr-neutral-400);

    grid-row: 1/1;
    justify-self: end;
    align-self: center;

    block-size: max-content;
    inline-size: 2rem;
    overflow-x: hidden;
    cursor: pointer;
    color: var(--_clr-txt);

    > .icon-menu > line {
      transition: transform 250ms ease-in-out;
    }
  }

  .page-header > .nav-main {
    --_top: 5rem; /*64px*/
    --_pos: 0.6rem; /*10px*/
    grid-column: auto;
    grid-row: auto;
    block-size: calc(100vh - var(--_top));
    inline-size: 100vw;
    padding-block-start: var(--flow-space);

    position: absolute;
    inset-block-start: var(--_top);
    inset-inline-start: var(--_pos);

    transform: rotateX(-90deg) translateX(calc(var(--_pos) * -1)); /* rotateX to collapse */
    transform-origin: top center;
    transition: 300ms all ease-out;

    background-color: var(--clr-primary-light-1);
    opacity: 0.3;

    > .list {
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;

      > .item {
        inline-size: 100%;
      }
    }
  }

  .page-header > .hamburger {
    &:focus-within {
      outline: 0.12rem dashed var(--clr-accent);
      outline-offset: 0.18rem;
    }

    &:has(:hover, :active) {
      --_clr-txt: var(--clr-neutral-900);
    }

    &:has(.nav-box:checked) {
      > .icon-menu > line {
        &:nth-of-type(1) {
          transform: rotate(45deg) translate(0.28em, -0.3rem);
        }

        &:nth-of-type(2) {
          transform: translateX(2rem);
        }

        &:nth-of-type(3) {
          border: 1px solid sandybrown;
          transform: rotate(-45deg) translate(-0.85rem, -0.1rem);
        }
      }

      + .nav-main {
        opacity: 1;
        transform: rotateX(0) translateX(-0.63rem);
        visibility: visible;
      }
    }
  }
}

/* for screen readers only */
.visually-hidden {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}
